"use strict";!function(s){function t(){this.$username=s(".username"),this.$password=s(".password"),this.$repassword=s(".repeat-password"),this.$textbox=s("input").not(".btn"),this.$titlebox=s(".titlebox"),this.$title1=s(".title1"),this.$btn=s(".btn"),this.$q=s(".q"),this.$r=s(".r"),this.$passwordsign=!1,this.$repasswordsign=!1,this.$usernamesign=!1,this.$ajax=!1,this.$gsyz=!1,this.init()}t.prototype.init=function(){var t=this;this.$password.on("input",function(){t.filter()}),this.$password.on("blur",function(){t.filter(),t.pwyzgs(),1==t.$passwordsign&&t.$titlebox.eq(0).css("display","none")}),this.$repassword.on("blur",function(){t.repwyz(),1==t.$repasswordsign&&t.$titlebox.eq(1).css("display","none"),t.title(1,t.$repasswordsign)}),this.$username.on("blur",function(){t.usernameyz(),t.findrepeat()}),this.$textbox.on("focus",function(){"none"==t.$titlebox.eq(0).css("display")&&"none"==t.$titlebox.eq(2).css("display")&&t.$titlebox.eq(s(this).attr("a")).css("display","block").siblings(".titlebox").css("display","none")}),this.$btn.on("click",function(s){s=s||window.event;if(1!=t.$passwordsign||1!=t.$repasswordsign||1!=t.$usernamesign)return!1;new Modal({btnname:".btn",modalsheet:!0,modalname:"#tishi"})})},t.prototype.usernameyz=function(){this.useryz=new RegExp(/^[\d\w]{7,14}$/g),""!=this.$username.val()?this.useryz.test(this.$username.val())?this.$ajax=!0:(this.$titlebox.eq(2).find(".baocuo").html("会员名格式有误").css("color","red"),this.$usernamesign=!1,this.$ajax=!1):(this.$titlebox.eq(2).find(".baocuo").html("会员名不能为空").css("color","red"),this.$usernamesign=!1,this.$ajax=!1)},t.prototype.findrepeat=function(){var t=this;1==this.$ajax&&s.ajax({type:"get",url:"http://10.31.158.21:8088/tianmao/object/php/registor-repeat.php?username="+t.$username.val()}).done(function(s){s?(t.$titlebox.eq(2).find(".baocuo").html("会员名已注册").css("color","red"),t.$usernamesign=!1):(t.$titlebox.eq(2).css("display","none"),t.$titlebox.eq(2).find(".baocuo").html("会员名可用").css("color","green"),t.$usernamesign=!0),t.$ajax=!1,t.title(2,t.$usernamesign)})},t.prototype.filter=function(){var s=0;/[\d]/g.test(this.$password.val())&&s++,/[a-z]/g.test(this.$password.val())&&s++,/[A-Z]/g.test(this.$password.val())&&s++,/\W/g.test(this.$password.val())&&s++,0==s&&(this.$titlebox.find("span").css({background:"#eee",color:"#000"}),this.$titlebox.eq(0).find(".baocuo").html("密码不能为空").css("color","red"),this.$passwordsign=!1,this.$gsyz=!1),1!=s&&2!=s||(this.$r.css({background:"red",color:"#fff"}).siblings("span").css({background:"#eee",color:"#000"}),this.$titlebox.eq(0).find(".baocuo").html("您输入的密码强度太低").css("color","red"),this.$passwordsign=!1,this.$gsyz=!1),3==s&&(this.$q.css({background:"#eee",color:"#000"}).siblings("span").css({background:"yellow",color:"#fff"}),this.$titlebox.eq(0).find(".baocuo").html("您输入的密码强度为中").css("color","green"),this.$gsyz=!0),4==s&&(this.$titlebox.find("span").css({background:"green",color:"#fff"}),this.$titlebox.eq(0).find(".baocuo").html("您输入的密码强度为强").css("color","green"),this.$gsyz=!0)},t.prototype.pwyzgs=function(){this.pwyz=new RegExp(/^[\d\w\W]{7,14}$/g),console.log(this.$gsyz),1==this.$gsyz&&(this.pwyz.test(this.$password.val())?this.$passwordsign=!0:(this.$titlebox.eq(0).find(".baocuo").html("您输入的密码格式有误").css("color","red"),this.$passwordsign=!1),this.$gsyz=!1,this.title(0,this.$passwordsign))},t.prototype.repwyz=function(){""!=this.$repassword.val()?this.$password.val()==this.$repassword.val()?(this.$titlebox.eq(1).find(".baocuo").html("正确").css("color","green"),this.$repasswordsign=!0):(this.$titlebox.eq(1).find(".baocuo").html("您两次输入的密码不相同").css("color","red"),this.$repasswordsign=!1):(this.$titlebox.eq(1).find(".baocuo").html("请再次确认密码").css("color","red"),this.$repasswordsign=!1)},t.prototype.title=function(s,t){0==t?this.$title1.eq(s).addClass("icon-shanchu2").css("color","red").removeClass("icon-weixuanzhongyuanquan"):this.$title1.eq(s).addClass("icon-weixuanzhongyuanquan").css("color","green").removeClass("icon-shanchu2")},new t}(jQuery);